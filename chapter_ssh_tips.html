<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SSH-Tips</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="chapter_1.html"><strong aria-hidden="true">1.</strong> Introduction and Basic Terminology</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_2.html"><strong aria-hidden="true">1.1.</strong> DHCP and DNS</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">1.2.</strong> Network Types</a></li><li class="chapter-item expanded "><a href="chapter_4.html"><strong aria-hidden="true">1.3.</strong> Cabling</a></li><li class="chapter-item expanded "><a href="chapter_5.html"><strong aria-hidden="true">1.4.</strong> Topologies</a></li><li class="chapter-item expanded "><a href="chapter_6.html"><strong aria-hidden="true">1.5.</strong> IPs</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_7.html"><strong aria-hidden="true">2.</strong> Routing</a></li><li class="chapter-item expanded "><a href="chapter_9.html"><strong aria-hidden="true">3.</strong> Protocols</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_10.html"><strong aria-hidden="true">3.1.</strong> SSH</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_ssh_tips.html" class="active"><strong aria-hidden="true">3.1.1.</strong> SSH-Tips</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_mdns.html"><strong aria-hidden="true">3.2.</strong> mDNS</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_11.html"><strong aria-hidden="true">4.</strong> Attacks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter_12.html"><strong aria-hidden="true">4.1.</strong> Firewalls</a></li><li class="chapter-item expanded "><a href="chapter_13.html"><strong aria-hidden="true">4.2.</strong> Security</a></li></ol></li><li class="chapter-item expanded "><a href="chapter_tools.html"><strong aria-hidden="true">5.</strong> Tools</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ssh-tips"><a class="header" href="#ssh-tips">SSH-Tips</a></h1>
<h2 id="disable-root"><a class="header" href="#disable-root">Disable root</a></h2>
<p>Adding a user to the sudoers group allows that user to execute commands with superuser (root) privileges by prefixing a command with sudo. This allows for fine-grained control over which users can perform which actions with superuser privileges.</p>
<p>Having the root account share the same password as a regular account, on the other hand, means that any user with access to the password can directly log in as the root user. This is less secure and not recommended, as it provides less visibility and control over who is using the superuser privileges and what actions are being performed.</p>
<p>Also, if an attack is set to target <code>root@ip</code>, by disabling root access it's impossible to create a connection through the root user.</p>
<p>In summary, using sudo provides better security and accountability by allowing only specific users to execute specific commands with superuser privileges, while sharing the root password with a regular user account provides no such controls.</p>
<p>Inside the server, create a new user with sudo access:</p>
<pre><code class="language-bash">adduser {&quot;USER_NAME&quot;}
usermod -aG sudo {&quot;USER_NAME&quot;}
</code></pre>
<h2 id="add-ssh-key"><a class="header" href="#add-ssh-key">Add SSH Key</a></h2>
<p>Generate ssh-key from local device:</p>
<pre><code class="language-bash">ssh-keygen {Extra flags}
</code></pre>
<p>The .pub key generated can be used to access the server without the created user password. It has to be copied to the server:</p>
<pre><code class="language-bash">cat {&quot;GENERATED_KEY&quot;}.pub | ssh {&quot;USER_NAME&quot;}@{ip} &quot;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys&quot;
</code></pre>
<p>alternative:</p>
<pre><code class="language-bash">ssh-copy-id -i {&quot;PATH_GENERATED_KEY/GENERATED_KEY.pub&quot;} {&quot;USER_NAME&quot;}@{ip}
</code></pre>
<p>The key without the <code>.pub</code> extension MUST NOT BE SHARED.</p>
<h2 id="change-port-and-config"><a class="header" href="#change-port-and-config">Change Port and Config</a></h2>
<p>SSH uses port 22, a better way to avoid port scanning or some sort of attack performed by bots analyzing random ip addresses that eventually compromises one of our servers could be changing the port.</p>
<p>The config file can be accessed following the steps:</p>
<pre><code class="language-bash">sudo nano /etc/ssh/sshd_config
</code></pre>
<p>Usual Changes:</p>
<blockquote>
<p>Port (not 22)</p>
<p>PermitRootLogin no</p>
<p>PasswordAuthentication no</p>
</blockquote>
<p>Now, only clients with an allowed ssh-key have access and root user is disabled when establishing the ssh connection.</p>
<p>After applying the changes, restart the service; using systemctl:</p>
<pre><code class="language-bash">sudo systemctl restart sshd
</code></pre>
<blockquote>
<p>NOTE</p>
<p>On the client, the port must be specified, with a flag as following <code>ssh {&quot;USER_NAME&quot;}@{ip} -p {PORT}</code></p>
</blockquote>
<h2 id="other-tools"><a class="header" href="#other-tools">Other Tools</a></h2>
<p>Uncomplicated Firewall, really useful to block ports and disable ping responses.</p>
<p>With ufw, firewall rules can be set using a set of predefined commands and profiles, allowing the user to quickly configure the firewall to block or allow specific types of incoming and outgoing traffic. </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="chapter_10.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="chapter_mdns.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="chapter_10.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="chapter_mdns.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
